
@{
    ViewBag.Title = "Report";
}

@*<h2>Report</h2>*@
@model Tuple<CampusSecurity.Models.UIModel, CampusSecurity.Models.SearchViewModel>

<html>

<link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<body>
    <nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" style="z-index:3;width:250px;margin-top:43px;" id="mySidebar">
        <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hide-large" title="Close Menu">
            <i class="fa fa-remove"></i>
        </a>
        <h4 class="w3-bar-item"><b>Menu</b></h4>

        <a class="w3-bar-item w3-button" href="#">Search</a>
        <a class="w3-bar-item w3-button" href="#">Advanced Search</a>
        <a class="w3-bar-item w3-button" href="#">Trends</a>
        <a class="w3-button" href="#">University Rankings</a>
        <a class="w3-bar-item w3-button" href="#">@Html.ActionLink("Report a Crime", "Report a Crime", "HelloWorld")</a>
    </nav>
    <div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <div class="w3-container" style="margin-left:250px; margin-top:43px">
        <h2 class="w3-text-teal" style="margin-left:250px">Report a Crime</h2>
        <div class="w3-container" style="margin-left:0px; margin-top:10px">
            <label><b>University</b></label>
            @Html.DropDownListFor(m => m.Item1.University, Model.Item1.University, new { id = "uni", style = "width: 300px; margin-left:25px;" })
        </div>

        <div class="w3-container" style="margin-left:0px; margin-top:10px">
            <label><b>Year</b></label>
            @Html.DropDownListFor(m => m.Item1.Year, Model.Item1.Year, new { id = "year", style = "margin-left:50px;" })
        </div>

        <div class="w3-container" style="margin-left:0px; margin-top:10px">
            <label><b>Location</b></label>
            @Html.DropDownListFor(m => m.Item1.Location, Model.Item1.Location, new { id = "loc", style = "width:150px;margin-left:50px;" })

        </div>

        <div class="w3-container" style="margin-left:0px; margin-top:10px">
            <label><b>Type of Crime</b></label>
            @Html.DropDownListFor(m => m.Item1.Type, Model.Item1.Type, new { id = "lstType", style = "width: 100px; margin-right:25px;", @onchange = "CallChangefunc(this.value)" })

        <div class="w3-container" style="margin-left:0px; margin-top:10px">
                <label style="margin-left:auto"><b>SubType</b></label>
                <select id="SubType"></select>
            </div>

            <div class="w3-container" style="margin-left:100px; margin-top:43px">
                <button type="submit" style="margin-left:100px; margin-top:25px" onclick="senddata()">Report</button>
            </div>
        </div>
        </div>
        <script>
            // Get the Sidebar
            var mySidebar = document.getElementById("mySidebar");

            // Get the DIV with overlay effect
            var overlayBg = document.getElementById("myOverlay");

            // Toggle between showing and hiding the sidebar, and add overlay effect
            function w3_open() {
                if (mySidebar.style.display === 'block') {
                    mySidebar.style.display = 'none';
                    overlayBg.style.display = "none";
                } else {
                    mySidebar.style.display = 'block';
                    overlayBg.style.display = "block";
                }
            }

            // Close the sidebar with the close button
            //function w3_close() {
            //    mySidebar.style.display = "none";
            //    overlayBg.style.display = "none";
            //}
        </script>
        <script>
            function CallChangefunc(input) {
                var items = '';
                if (input == "Arrests" || input == "Discipline") {
                    items += "<option value='Drug'> Drug </option>";
                    items += "<option value='Weapon'> Weapon </option>";
                    items += "<option value='Liquor'> Liquor </option>";
                }
                else if (input == "Hate Crime") {
                    items += "<option value='Religion'> Religion </option>";
                    items += "<option value='Gender'> Gender </option>";
                    items += "<option value='Disability'> Disability </option>";
                    items += "<option value='Race'> Race </option>";
                }
                else if (input == "Violence Against Women") {
                    items += "<option value='Stalk'> Stalking </option>";
                    items += "<option value='Dating'> Dating violence </option>";
                    items += "<option value='Domest'> Domestic violence </option>";
                }
                else if (input == "Criminal Offense") {
                    items += "<option value='Burgla'> Burglary </option>";
                    items += "<option value='Murd'> Murder </option>";
                    items += "<option value='Vehic'> Vehicle theft </option>";
                    items += "<option value='neg_m'> Man slaughter </option>";
                    items += "<option value='Robbe'> Robbery </option>";
                    items += "<option value='Forcib'> Forcible Sex offence </option>";
                    items += "<option value='nonfor'> non-forcible sex offence </option>";
                    items += "<option value='agg_a'> Assault </option>";
                    items += "<option value='Arson'> Arson </option>";
                }
                $('#SubType').html(items);
            }
        </script>
        <script>
            function senddata() {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("Reporting", "HelloWorld")',
                    data: { "Uni": $("#uni").val(), "Year": $("#year").val(), "Location": $("#loc").val(), "Type": $("#lstType").val(), "SubType": $("#SubType").val() },//'uni=' + $("uni").val + '&year=' + $("year").val + '&loc=' + $("loc").val,
                    dataType: "html",
                    success: function (data) {
                        alert("Success");
                        var url = ' @Url.Action("Welcome", "HelloWorld")';
                        window.location = url;
                    }
                });

            }
        </script>
</body>
</html>